<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
			   xmlns:s="library://ns.adobe.com/flex/spark"
			   xmlns:mx="library://ns.adobe.com/flex/mx"
			   xmlns:WrbComp="WrbComp.*"
			   xmlns:Controls="fx.com.adobe.Controls.*"
			   xmlns:WrbHelpComp="WrbHelpComp.*"
			   xmlns:ns1="*"
			   width="100%" height="100%" creationComplete="PageLoad()" pageTitle="TravelDesk">
	<fx:Declarations>
		<mx:EmailValidator id="EmailValidator" valid="EmailValidator_validHandler(event)"
						   invalid="EmailValidator_invalidHandler(event)"/> 
		<s:RadioButtonGroup id="Modes"  change="CourierChange()"/> 
	</fx:Declarations>
	
	<fx:Style source = "..\\Common\\ApplicationCSS.css"/>
	<fx:Script source = "..\\Common\\Functions.as"/>
	<fx:Script source = "..\\Common\\CommonScript.as"/>
	<fx:Script>
		<![CDATA[
			import WrbComp.frmsearchwindow;
			
			import WrbHelpComp.HlpGridHdr;
			
			import mx.collections.ArrayCollection;
			import mx.controls.Alert;
			import mx.controls.CheckBox;
			import mx.events.CalendarLayoutChangeEvent;
			import mx.events.CloseEvent;
			import mx.events.FlexEvent;
			import mx.events.IndexChangedEvent;
			import mx.events.ValidationResultEvent;
			import mx.graphics.codec.PNGEncoder;
			import mx.graphics.shaderClasses.SaturationShader;
			
			import spark.events.IndexChangeEvent;                       
			private var _isValidEmail:Boolean = true;	
			import spark.events.IndexChangeEvent;
			import spark.events.TextOperationEvent;
			public var validator:ValidationResultEvent;
			private var SearchPopUp:frmsearchwindow = new frmsearchwindow();
			public static var Global_AC:ArrayCollection = new ArrayCollection();
			public static var GlobalXml:String = "",ErrStr1:String="",Str_Email:String="",ErrStr:String="";
			public var Id:int=0,ErrMsg:String="",UserId:int=0;
			public var AddMode:Boolean=true,Flag:Boolean=true,ClientId:int=0,ClientName:String="";
			public var StateId:int=0,CityId:int=0,State:String="",City:String="",Mode:String="";
			public var CreateControlAC:ArrayCollection = new ArrayCollection();
			public var MasterClients:String="";
			public var Clients:String="";
			protected function PageLoad():void
			{
				Global_AC=funLoginInfo("<FlexServiceUrl>http://192.168.1.135/WebService/clsDataInterface.asmx?WSDL</FlexServiceUrl><FlexSwfUrl>http://192.168.1.135/wrperp/</FlexSwfUrl><gVchTypCd>PO</gVchTypCd><gVchTypDesc>Purchase Order</gVchTypDesc><gVchTypFk>387</gVchTypFk><gLocFk>1</gLocFk><gUmpFk></gUmpFk><gFyrFk>2</gFyrFk><gUsr>ADMIN</gUsr><gUsrFk>4</gUsrFk><gCur>Indian Rupees</gCur><gCurFk>1</gCurFk><gCurRt> 1.0000000</gCurRt><gPrintPath></gPrintPath><gScrId>551</gScrId><gCPRights>10101111</gCPRights>")
				GlobalXml="";
				GlobalXml += "<ROOT>";
				GlobalXml += ObjToXmlStr_Comm(Global_AC,"GlobalXml")
				GlobalXml += "</ROOT>"; 
				HelpState(); 
				Id_TrDesk.setButtonRights("Delete",true);  
				Id_TrAgency.setButtonRights("Delete",true);
				btn_TravelDesk.Button_B_mouseOverHandler();	
				type.visible=true;chk_Delete.visible=false;
			//	MasterClient.selected=true
			}
			public function HelpState():void
			{
				useWeb("TravelDesk","STATELOAD_CUSTOM",[GlobalXml,"STATELOAD","","",0,0]);
				//useWeb("TravelDesk","CLIENTDTLS_CUSTOM",[GlobalXml,"CLIENTDTLS","","",0,0]); 
				useWeb("TravelDesk","CLIENTDTLSss_CUSTOM",[GlobalXml,"CLIENTDTLS-Agency","","",0,0]); 
//				if(MasterClient.selected==true)
//				{
//					MasterClients="MasterClient";
//				} 
//				useWeb("TravelDesk","CLIENTDTLS_CUSTOM",[GlobalXml,"MasterClent-Desk","",MasterClients,0,0]); 
			}	
			private function Custom_WebSer_Result (Ds_Objects:Object):void
			{
				if (Ds_Objects.currentTarget.description.toString() == "STATELOAD_CUSTOM")
				{
					Hlp_State.dataProvider=null; 
					if (Ds_Objects.result.Tables.Table.Rows.length > 0)
					{
						Hlp_State.dataProvider=Ds_Objects.result.Tables.Table.Rows as ArrayCollection; 
					}				
				}
				if (Ds_Objects.currentTarget.description.toString() == "CITYLOAD_CUSTOM")
				{
					Hlp_City.dataProvider=null; 
					if (Ds_Objects.result.Tables.Table.Rows.length > 0)
					{
						Hlp_City.dataProvider=Ds_Objects.result.Tables.Table.Rows as ArrayCollection	
					}				
				}
				if (Ds_Objects.currentTarget.description.toString() == "ClientReset_CUSTOM")
				{ 
					Grd_resetdata.dataProvider=null
					if (Ds_Objects.result.Tables.Table.Rows.length > 0)
					{
						Grd_resetdata.dataProvider=Ds_Objects.result.Tables.Table.Rows as ArrayCollection;	 
					}				
				}
				if (Ds_Objects.currentTarget.description.toString() == "TravelDeskDatas_CUSTOM")
				{ 
					Hlp_FirstName.dataProvider=null
					if (Ds_Objects.result.Tables.Table.Rows.length > 0)
					{
						Hlp_FirstName.dataProvider=Ds_Objects.result.Tables.Table.Rows as ArrayCollection;	 
					}	
					//Hlp_FirstName.setFocus();
				}
				if (Ds_Objects.currentTarget.description.toString() == "Userdata_CUSTOM")
				{ 
					if (Ds_Objects.result.Tables.Table.Rows.length > 0)
					{  
						Id=Ds_Objects.result.Tables.Table.Rows[0].Id; 
						//						Hlp_FirstName.text=Ds_Objects.result.Tables.Table.Rows[0].FirstName;
						//						txt_LastName.text=Ds_Objects.result.Tables.Table.Rows[0].LastName;
						//						txt_Mobile.text=Ds_Objects.result.Tables.Table.Rows[0].Mobile;
						//						txt_Email.text=Ds_Objects.result.Tables.Table.Rows[0].Email;
						
						Txt_Firsts.text=Ds_Objects.result.Tables.Table.Rows[0].FirstName;
						Txt_Emails.text=Ds_Objects.result.Tables.Table.Rows[0].Email;
						Txt_Lasts.text=Ds_Objects.result.Tables.Table.Rows[0].LastName;
						Txt_Mobiles.text=Ds_Objects.result.Tables.Table.Rows[0].Mobile;
						Txt_Empcode.text=Ds_Objects.result.Tables.Table.Rows[0].Mobile;
					}				
				}
				if (Ds_Objects.currentTarget.description.toString() == "CLIENTDTLS_CUSTOM")
				{ 
					Hlp_Clients.dataProvider=null; 
					Hlp_FirstName.text="";
					Hlp_Clients.text="";
					Hlp_Clients.fnClear();
					if (Ds_Objects.result.Tables.Table.Rows.length > 0)
					{
						Hlp_Clients.dataProvider=Ds_Objects.result.Tables.Table.Rows as ArrayCollection	 
					}	
					//Hlp_Clients._setFocus();
				}
				if (Ds_Objects.currentTarget.description.toString() == "CLIENTDTLSss_CUSTOM")
				{  
					Hlp_Client_Desk.dataProvider= null;
					Hlp_FirstName.text="";
					Hlp_Client_Desk.text="";
					Hlp_Client_Desk.fnClear();
					if (Ds_Objects.result.Tables.Table.Rows.length > 0)
					{ 	
						Hlp_Client_Desk.dataProvider=Ds_Objects.result.Tables.Table.Rows as ArrayCollection;
					}	
					//Hlp_Clients._setFocus();
				}
				if (Ds_Objects.currentTarget.description.toString() == "CLIENTDTLS_Agency_CUSTOM")
				{ Grd_ListClient.dataProvider=null;
					if (Ds_Objects.result.Tables.Table.Rows.length > 0)
					{
					   Grd_ListClient.dataProvider=Ds_Objects.result.Tables.Table.Rows as ArrayCollection
					} 
				} 
				if (Ds_Objects.currentTarget.description.toString() == "Update_CUSTOM")
				{
					if((Id!=0)&&(Mode == "TRAVELDESK" ))
					{
					alignAlert(Alert.show("TravelDesk Updated Successfully.","Message !",Alert.OK, null, null, iconTickLarge, Alert.OK),10,"");
					FnClear();
					}
				}
				if (Ds_Objects.currentTarget.description.toString() == "Save_CUSTOM")
				{
					if((Id!=0)&&(Mode == "TRAVELDESK" ))
					{
						alignAlert(Alert.show("TravelDesk Updated Successfully.","Message !",Alert.OK, null, null, iconTickLarge, Alert.OK),10,"");
						//FnClosetariff_clickHandler(Event); 
						FnClear();
						AddMode=false;
					} 
					if ((Id!=0)&&(Mode == "ENDUSER" ))
					{
						alignAlert(Alert.show("Password has been Resetted Successfully.","Message !",Alert.OK, null, null, iconTickLarge, Alert.OK),10,"");
						useWeb("TravelDesk","ClientReset_CUSTOM",[GlobalXml,"RESET","","",ClientId,0]);
						FnClosetariff_clickHandler(Event);
						FiltFirstName.text="";
						AddMode=false;
					}
					if (AddMode == true)
					{
						alignAlert(Alert.show("TravelDesk Added Successfully.","Message !",Alert.OK, null, null, iconTickLarge, Alert.OK),10,"");
						FnClear();
					}
					if(Mode=='TRAVELAGENCY')
					{
						alignAlert(Alert.show("Travel Agent Added Successfully.","Message !",Alert.OK, null, null, iconTickLarge, Alert.OK),10,"");
						TravelAgencys();
						travelAgentclear();
					}					
				}
				if (Ds_Objects.currentTarget.description.toString() == "Search_CUSTOM")
				{ 
					if(Mode=='TRAVELAGENCY')
					{ Grd_ListClient.dataProvider=null;
						if (Ds_Objects.result.Tables.Table.Rows.length > 0)
						{
							txt_FirstName_Agen.text=Ds_Objects.result.Tables.Table.Rows[0].FirstName;
							txt_LastName_Agen.text=Ds_Objects.result.Tables.Table.Rows[0].LastName;  
							txt_Mobile_Agen.text=Ds_Objects.result.Tables.Table.Rows[0].Mobile; 
							txt_Email_Agen.text=Ds_Objects.result.Tables.Table.Rows[0].Email;
							txt_Website_Agen.text=Ds_Objects.result.Tables.Table.Rows[0].Website;
							Id=Ds_Objects.result.Tables.Table.Rows[0].Id;
							AddMode=false;
						} 
						if (Ds_Objects.result.Tables.Table1.Rows.length > 0)
						{
							Grd_ListClient.dataProvider=Ds_Objects.result.Tables.Table1.Rows as ArrayCollection
						} 
					}
					else
					{ 
					ClientName=Ds_Objects.result.Tables.Table.Rows[0].ClientName;
					Hlp_Clients.text=ClientName;
					ClientId=Ds_Objects.result.Tables.Table.Rows[0].ClientId; 
					Hlp_FirstName.text=Ds_Objects.result.Tables.Table.Rows[0].FirstName;
					txt_LastName.text=Ds_Objects.result.Tables.Table.Rows[0].LastName;
					MasterClients=Ds_Objects.result.Tables.Table.Rows[0].Designation; 
					if(MasterClients=="MasterClient")
					{
					     MasterClient.selected=true;
					} 
					if(MasterClients=="Client");
					{
						Client.selected=true;
					} 
					txt_Mobile.text=Ds_Objects.result.Tables.Table.Rows[0].Mobile;
					//	txt_Office.text=Ds_Objects.result.Tables.Table.Rows[0].Office;
					//	txt_address.text=Ds_Objects.result.Tables.Table.Rows[0].address;
					
					txt_Email.text=Ds_Objects.result.Tables.Table.Rows[0].Email;
					Hlp_State.text=Ds_Objects.result.Tables.Table.Rows[0].State;
					State=Ds_Objects.result.Tables.Table.Rows[0].State; 
					StateId=Ds_Objects.result.Tables.Table.Rows[0].StateId;
					Hlp_City.text=Ds_Objects.result.Tables.Table.Rows[0].City;
					City=Ds_Objects.result.Tables.Table.Rows[0].City; 
					CityId=Ds_Objects.result.Tables.Table.Rows[0].CityId;
					txt_Website.text=Ds_Objects.result.Tables.Table.Rows[0].Website;   
					
					Id=Ds_Objects.result.Tables.Table.Rows[0].Id;
					AddMode=false;
					chk_Delete.visible=true;
				  }
				}
				if (Ds_Objects.currentTarget.description.toString() == "Delete_CUSTOM")
				{	
					alignAlert(Alert.show("TravelDesk Deleted Successfully.","Message !",Alert.OK, null, FunCall,iconTickLarge, Alert.OK),10,'');
					FnClear();	
				}	
				if (Ds_Objects.currentTarget.description.toString() == "UserDel_CUSTOM")
				{	
					alignAlert(Alert.show("User Deleted Successfully.","Message !",Alert.OK, null, FunCall,iconTickLarge, Alert.OK),10,'');
				    FnClear();	
					//EndUsers();
				}	
				if (Ds_Objects.currentTarget.description.toString() == "InActiveUser_CUSTOM")
				{	
					alignAlert(Alert.show("User Inactivated Successfully.","Message !",Alert.OK, null, FunCall,iconTickLarge, Alert.OK),10,'');
					hlp_Clients();
				//	FnClear();	
					//EndUsers();
				}	
			}  
			
			public function FnSearch():void
			{
				FnClear();
				ErrStr=""; 
				GlobalXml="";
				GlobalXml += "<ROOT>";
				GlobalXml += ObjToXmlStr_Comm(Global_AC,"GlobalXml")
				GlobalXml += "</ROOT>";  
				var Load:Array =new Array();
				Load[0]=GlobalXml; Load[1]=ClientId; Load[2]=0;  Load[3]= ClientId; 
				
				useWeb("TravelDesk","Search_CUSTOM1",[GlobalXml,ClientId,0,UserId]);
			}
			private function validation():String
			{
				var TxtFlag:Boolean=true;var ErrStr:String="";
				if(Hlp_Clients.text=="")
				{
					if(Flag == true)
					{
						Hlp_Clients.setFocus();Flag=false;
					}
					ErrStr=ErrStr +" *  Client Name is Required \n";
				}
				if(Hlp_FirstName.text=="")
				{
					if(TxtFlag=true)
					{
						Hlp_FirstName.setFocus();
						TxtFlag=false;
					}
					ErrStr=ErrStr +" *  First Name is Required \n";
				} 
				if(txt_LastName.text=="")
				{
					if(TxtFlag=true)
					{
						txt_LastName.setFocus();
						TxtFlag=false;
					}
					ErrStr=ErrStr +" *  Last Name is Required \n";
				} 
				if(txt_Mobile.text == "")
				{
					if(TxtFlag=true)
					{
						txt_Mobile.setFocus();
						TxtFlag=false;
					}
					ErrStr=ErrStr +" *  MobileNo is Required \n";
				}
				if(txt_Email.text == "")
				{
					if(TxtFlag=true)
					{
						txt_Email.setFocus();
						TxtFlag=false;
					}
					ErrStr=ErrStr +" *  EmailId is Required \n";
				}  
				if(txt_Email.text!="")
				{
					EmailValidator.validate(txt_Email.text);
				}   
				return ErrStr;
			} 
			protected function txt_Email_focusOutHandler(event:FocusEvent):void
			{
				//				if(txt_Email.text != "")
				//				{	EmailValidator.validate(txt_Email.text);	}
				//				else
				//				{   txt_Email.errorString = "";	} 
			}
			protected function txt_Email_changeHandler(event:TextOperationEvent):void
			{
				if(txt_Email.text != "")
				{	txt_Email.errorString = ""; }
			}
			protected function EmailValidator_validHandler(event:ValidationResultEvent):void
			{ 
				Str_Email = "";
			}
			
			protected function EmailValidator_invalidHandler(event:ValidationResultEvent):void
			{	
				txt_Email.errorString = event.message;
			} 
			protected function txt_Mobile_changeHandler(event:TextOperationEvent):void
			{
				if(txt_Mobile.text != "")
				{		txt_Mobile.errorString = "";	}
			}
			protected function txt_Mobile_focusOutHandler():void
			{
				if(txt_Mobile.text != "")
				{
					if(txt_Mobile.text.length < 10)
					{
						txt_Mobile.errorString = "Mobile Number Must be 10 digits.";
					}
					if(txt_Mobile.text.length == 10)
					{
						var Str:String = txt_Mobile.text;						
						var Str1:String = Str.substr(0, 1);						
						if((Str1 != "9") && (Str1 != "8") && (Str1 != "7"))
						{
							txt_Mobile.errorString = "Mobile Number Starts With 9 or 8 or 7";
						}
						ErrStr=ErrStr+" * Invalid Mobile Number";
					}	}
			} 
			
			protected function Save():void
			{ 
				Mode = "TRAVELDESK";AddMode = true;
				ErrStr=validation();
				if(txt_Mobile.text != "")
				{		
					//	txt_Mobile_focusOutHandler();Flag=false;
				}
				if(Str_Email!="")
				{
					if(Flag == true)
					{
						txt_Email.setFocus();Flag=false;
					}
					ErrStr=ErrStr+Str_Email;
				}
				if(MasterClient.selected==true)
				{
					MasterClients="MasterClient";
				}
				else
				{
					MasterClients="Client";
				}
				if(ErrStr !="")
				{
					alignAlert(Alert.show(ErrStr,"Required Fields !",Alert.OK,this,null,iconErrLarge),10,"");
					return; 
				} 
				else
				{   
					var Ac:ArrayCollection=new ArrayCollection
						([{
							ClientName:ClientName,ClientId:ClientId, 
							FirstName:Hlp_FirstName.text, 
							Designation:MasterClients,LastName:txt_LastName.text,
							Mobile:txt_Mobile.text,Office:"",address:"", 
							Email:txt_Email.text,State:State,StateId:StateId,
							City:City,CityId:CityId,Website:txt_Website.text,  
							Id:Id,Mode:"TRAVELDESK" 
						}]);
					var HdrXml:String="";
					HdrXml += "<ROOT>";
					HdrXml += ObjToXmlStr_Comm(Ac,"HdrXml")
					HdrXml += "</ROOT>"; 
					useWeb("TravelDesk","Save_CUSTOM",[GlobalXml,HdrXml]); 
				}
			}
			private function EndUser_validation():String
			{
				var TxtFlags:Boolean=true;var  ErrStr1:String="";	
				if(Txt_Firsts.text=="")
				{
					if(TxtFlags=true)
					{
						Txt_Firsts.setFocus();
						TxtFlags=false;
					}
					ErrStr1=ErrStr1 +" *  First Name is Required \n";
				}  
				if(Txt_Mobiles.text == "")
				{
					if(TxtFlags=true)
					{
						Txt_Mobiles.setFocus();
						TxtFlags=false;
					}
					ErrStr1=ErrStr1 +" *  MobileNo is Required \n";
				}
				if(Txt_Emails.text == "")
				{
					if(TxtFlags=true)
					{
						Txt_Emails.setFocus();
						TxtFlags=false;
					}
					ErrStr1=ErrStr1 +" *  EmailId is Required \n";
				}
				return ErrStr1;
			}
			protected function EndUser_Save():void
			{ 
				ErrStr1=EndUser_validation();
				if(Txt_Mobiles.text != "")
				{		
					//	txt_Mobile_focusOutHandler();Flag=false;
				}
				if(Str_Email!="")
				{
					if(Flag == true)
					{
						Txt_Emails.setFocus();Flag=false;
					}
					ErrStr1=ErrStr1+Str_Email;
				}
				Mode  = "ENDUSER"
				if(ErrStr1 !="")
				{
					alignAlert(Alert.show(ErrStr1,"Required Fields !",Alert.OK,this,null,iconErrLarge),10,"");
					return; 
				} 
				else
				{  
					var Ac:ArrayCollection=new ArrayCollection
						([{
							ClientName:Hlp_Client_Desk.text,ClientId:ClientId, 
							FirstName:Txt_Firsts.text, 
							Designation:"",LastName:Txt_Lasts.text,
							Mobile:Txt_Mobiles.text,Office:"",address:"", 
							Email:Txt_Emails.text,State:State,StateId:StateId,
							City:City,CityId:CityId,Website:txt_Website.text,  
							Id:Id,Mode:"ENDUSER" 
						}]);
					var HdrXml:String="";
					HdrXml += "<ROOT>";
					HdrXml += ObjToXmlStr_Comm(Ac,"HdrXml")
					HdrXml += "</ROOT>"; 
					useWeb("TravelDesk","Save_CUSTOM",[GlobalXml,HdrXml]); 
				}
			}
			public function Tr_Validate():String
			{
				var TxtFlags:Boolean=true;var  ErrStr1:String="";	
				if(txt_FirstName_Agen.text=="")
				{
					if(TxtFlags=true)
					{
						txt_FirstName_Agen.setFocus();
						TxtFlags=false;
					}
					ErrStr1=ErrStr1 +" *  First Name is Required \n";
				}  
				if(txt_Mobile_Agen.text == "")
				{
					if(TxtFlags=true)
					{
						txt_Mobile_Agen.setFocus();
						TxtFlags=false;
					}
					ErrStr1=ErrStr1 +" *  MobileNo is Required \n";
				}
				if(txt_Email_Agen.text == "")
				{
					if(TxtFlags=true)
					{
						txt_Email_Agen.setFocus();
						TxtFlags=false;
					}
					ErrStr1=ErrStr1 +" *  EmailId is Required \n";
				}
				return ErrStr1; 
			}
			protected function Tr_Agent_Save():void
			{   Mode='TRAVELAGENCY';AddMode=false;
				ErrStr1=Tr_Validate();
				if(ErrStr1 !="")
				{
					alignAlert(Alert.show(ErrStr1,"Required Fields !",Alert.OK,this,null,iconErrLarge),10,"");
					return; 
				} 
				var ErrString="";var Flag:Boolean=true;
				var Ac:ArrayCollection=new ArrayCollection
					([{
						ClientName:"",ClientId:0, 
						FirstName:txt_FirstName_Agen.text, 
						Designation:"",LastName:txt_LastName_Agen.text,
						Mobile:txt_Mobile_Agen.text,Office:"",address:"", 
						Email:txt_Email_Agen.text,State:"",StateId:0,
						City:"",CityId:0,Website:txt_Website_Agen.text,  
						Id:0,Mode:"TRAVELAGENCY" 
					}]);
				var Grid_AC1:ArrayCollection=new ArrayCollection();
				var Grid_AC:ArrayCollection=new ArrayCollection();
				Grid_AC1=Grd_ListClient.dataProvider as ArrayCollection; 
				for(var i:int=0;i<Grid_AC1.length;i++)
				{
					if(Grid_AC1[i].Tick=="1")
					{
						Grid_AC.addItem({ClientName:Grid_AC1[i].ClientName,ClientId:Grid_AC1[i].ClientId});
						//Grid_AC.addItem(Grid_AC1[i].ClientId,Grid_AC1[i].ClientName);
					}
				}
				if((Grid_AC==null)||(Grid_AC.length==0))
				{
					ErrString=ErrString +"*  ClientName are Required.\n";
					
					if(ErrString !="")
					{
						alignAlert(Alert.show(ErrString,"Required Fields !",Alert.OK,this,null,iconErrLarge),10,"");
						return; 
					} 
				}
				var HdrXml:String="";
				HdrXml += "<ROOT>";
				HdrXml += ObjToXmlStr_Comm(Ac,"HdrXml")
				HdrXml += "</ROOT>"; 
				
				var GridXml:String="";				
				GridXml += "<ROOT>";
				GridXml += ObjToXmlStr_Comm(Grid_AC,"GridXml")
				GridXml += "</ROOT>";
				
				useWeb("TravelDesk","Save_CUSTOM",[GlobalXml,HdrXml,GridXml]); 
			}
			protected function Search():void
			{
				PopUpManager.addPopUp( SearchPopUp , this, true);
				SearchPopUp.Prc_name="TravelDesk"
				var SearchParam:Array =new Array();
				SearchPopUp.HlpIndex="SEARCH"
				SearchParam[0]=GlobalXml;
				SearchParam[1]=0;
				SearchParam[2]=""; 
				SearchParam[3]="";
				SearchPopUp.Prc_Param=SearchParam
				SearchPopUp.HlpSrchGlobal=""
				SearchPopUp.dataPanel.focusEnabled=true
				SearchPopUp.Pageint()					
				SearchPopUp.addEventListener("PopupEnter",funpopupEnter);
				SearchPopUp.addEventListener("PopupClose",funpopupClose);
				PopUpManager.centerPopUp(SearchPopUp);			
			}
			private function funpopupClose(event:Event):void
			{ 			} 
			private function funpopupEnter(event:Event):void
			{
				if(SearchPopUp.SelectRow.Id!="")
				{
					Searchhb(SearchPopUp.SelectRow.Id,0); 
				}
		    }
			private function Searchhb(Id:int,_PrdFk:int):void
			{
				var Load:Array = new Array(); 
				Load[0] = GlobalXml; Load[1] = Id; Load[2]="";Load[3]="";
				useWeb("TravelDesk","Search_CUSTOM",Load);
			}
			protected function Tr_Agent_Search():void
			{
				PopUpManager.addPopUp( SearchPopUp , this, true);
				SearchPopUp.Prc_name="TravelDesk"
				var SearchParam:Array =new Array();
				SearchPopUp.HlpIndex="SEARCH"
				SearchParam[0]=GlobalXml;
				SearchParam[1]=0;
				SearchParam[2]="TRAVELAGENCY";
				SearchParam[3]="";
				SearchPopUp.Prc_Param=SearchParam
				SearchPopUp.HlpSrchGlobal=""
				SearchPopUp.dataPanel.focusEnabled=true
				SearchPopUp.Pageint()					
				SearchPopUp.addEventListener("PopupEnter",funpopupEnter1);
				SearchPopUp.addEventListener("PopupClose",funpopupClose1);
				PopUpManager.centerPopUp(SearchPopUp);			
			}
			private function funpopupClose1(event:Event):void
			{ 			} 
			private function funpopupEnter1(event:Event):void
			{ if(SearchPopUp.SelectRow.Email!=null)
				{	 Searchhb1(SearchPopUp.SelectRow.Email,0);		
				}
			}
			private function Searchhb1(Email:String,_PrdFk:int):void
			{
				var Load:Array = new Array(); 
				Load[0] = GlobalXml; Load[1] = Id; Load[2]="TRAVELAGENCY";Load[3]=Email;
				useWeb("TravelDesk","Search_CUSTOM",Load);
			}
			protected function Delete():void
			{
				if(Id == 0)
				{
					alignAlert(Alert.show("This is an Invalid Process.","Alert Message !",Alert.OK, 
						null, null,iconWarning, Alert.OK),10,'');					
					return;
				}	
			}
			private function removeDgridItem(event:CloseEvent):void 
			{	
				if (event.detail==Alert.YES) 
				{	
					var Load:Array = new Array();
					Load[0]= GlobalXml; Load[1]= Id;  
					//	useWeb("TravelDesk","Delete_CUSTOM",Load);
				}
			}
			public function FunCall(event:CloseEvent):void
			{
				if (event.detail == Alert.OK) 
				{	 
					Hlp_Client_Desk.setFocus();
				}
			}
			protected function FnClear():void
			{
				PageLoad();	Hlp_Clients.text="", Hlp_FirstName.text="",
				txt_LastName.text="",txt_Designation.text="",					 
				txt_Mobile.text="",txt_Office.text="",txt_address.text="",
				ClientId=0;	txt_Email.text="",Hlp_State.text="",StateId=0,
				Hlp_City.text="",CityId=0,txt_Website.text="",Id=0;
				Hlp_City.dataProvider=null;
				FiltFirstName.text=""; Mode="";ErrStr1="";ErrStr="";
				//Hlp_Clients.dataProvider.removeAll();Hlp_FirstName.dataProvider.removeAll();
				MasterClient.selected=false;Client.selected=false;Hlp_Clients.dataProvider=null;
			   chk_Delete.visible=false;chk_Delete.selected=false;Hlp_Client_Desk.fnClear();
				Hlp_Clients.fnClear();	Hlp_FirstName.fnClear();Hlp_FirstName.dataProvider= null;
				Hlp_Clients._setFocus(); 
			}
			protected function FnClear1():void
			{
				 Hlp_Clients.text="", Hlp_FirstName.text="",//Hlp_Clients._setFocus();
				txt_LastName.text="",txt_Designation.text="",					 
					txt_Mobile.text="",txt_Office.text="",txt_address.text="",
					ClientId=0;	txt_Email.text="",Hlp_State.text="",StateId=0,
						Hlp_City.text="",CityId=0,txt_Website.text="",Id=0;
				Hlp_City.dataProvider=null; 
				FiltFirstName.text=""; Mode="";ErrStr1="";ErrStr=""; 
				Hlp_Clients.fnClear();	Hlp_FirstName.fnClear();Hlp_FirstName.dataProvider= null;
			}
			public function travelAgentclear():void
			{
				txt_FirstName_Agen.text="";
				txt_Mobile_Agen.text="";
				txt_LastName_Agen.text="";
				txt_Email_Agen.text="";
				txt_Website_Agen.text="";
				FiltClientName.text=""; 
				Id=0;
				Mode:"TRAVELAGENCY" ;
				Grd_ListClient.dataProvider=null;
				btn_Refresh_clickHandler();
				ClientId=0;
			}
			private function ChangeState1():void
			{
				if(Hlp_State.selected())
				{ 
				StateId=Hlp_State.Select_Row.zStateId;
				State=Hlp_State.Select_Row.StateName;
				Hlp_State.text=State;
				useWeb("TravelDesk","CITYLOAD_CUSTOM",[GlobalXml,"CITYLOAD","","",StateId,0]);
				}
				else
				{
					Hlp_State.text="";
					StateId=0;
					State="";
				} 
				CityId=0;
				Hlp_City.text="";
				City=""; 
				Hlp_City._setFocus();
			}
			private function ChangeName():void
			{
				//Hlp_Client.fnClear();
				if(Hlp_Clients.text!=="")
				{
					//Hlp_FirstName.enabled=true;
				if(Hlp_FirstName.selected())
				{
					Hlp_FirstName.text=Hlp_FirstName.Select_Row.FirstName;
					txt_LastName.text=Hlp_FirstName.Select_Row.LastName; 
					txt_Email.text=Hlp_FirstName.Select_Row.Mail;
					txt_Mobile.text=Hlp_FirstName.Select_Row.Mobile;
					var FrstId:int=Hlp_FirstName.Select_Row.zId;
				}
				else
				{
					Hlp_FirstName.text="";
					FrstId=0;
				}	 
				}
//				else
//				{
//					//Hlp_FirstName.focusEnabled=false;
//					Hlp_Clients._setFocus();
//				}
			//	Hlp_State._setFocus();
			}
			private function ChangeCity():void
			{
				if(Hlp_City.selected())
				{
				CityId=Hlp_City.Select_Row.zCityId;
				City=Hlp_City.Select_Row.CityName;
				Hlp_City.text=City;
				}
				else
				{
					CityId=0;
					Hlp_City.text="";
					City=""; 
				}	
			//	txt_Website.setFocus();
			}
			public function SelectClient():void
			{  
				if(Hlp_Clients.selected()) 
				{
					Hlp_Clients.text=Hlp_Clients.Select_Row.ClientName;
					ClientId=Hlp_Clients.Select_Row.zClientId;
					ClientName=Hlp_Clients.text
					useWeb("TravelDesk","TravelDeskDatas_CUSTOM",[GlobalXml,"TravelDeskDatas","",MasterClients,ClientId,0]);
				}
				else
				{
					Hlp_Clients.text="";
					ClientId=0;
				}
				//Hlp_Clients.Select_Row=null;; 
			}
			protected function Ddl_Client_changeHandler():void
			{  
				Hlp_FirstName.text="";
				txt_LastName.text="";
					txt_Email.text="";
					txt_Mobile.text="";
					Hlp_FirstName.dataProvider=null;
					Hlp_FirstName.fnClear();
				if(Modes.selectedValue==1)
				{
					SelectClient();
				}
				if(Modes.selectedValue==0)
				{
					SelectClient();
				}
				Hlp_FirstName._setFocus();
			}
			public function hlp_Clients():void
			{  
				if(Hlp_Client_Desk.selected()) 
				{
					Hlp_Client_Desk.text =Hlp_Client_Desk.Select_Row.ClientName;
					ClientId=Hlp_Client_Desk.Select_Row.zClientId; 
					useWeb("TravelDesk","ClientReset_CUSTOM",[GlobalXml,"RESET","","",ClientId,0]);
				}
				else
				{
					Hlp_Client_Desk.text="";
					ClientId=0;
				}
			//	Hlp_Client_Desk.fnClear();
			}
			var Email:String="";
			public function Deletes(Event):void
			{   
				Email="";
				UserId=Grd_resetdata.selectedItem.Id;
				Email=Grd_resetdata.selectedItem.EmailId;
				if((UserId!=0)&&(Email!=""))
				{
					alignAlert(Alert.show("Do you want to InActive this User?", "Warning",Alert.YES | Alert.NO, null,
						Savesuccess2, iconWarning, Alert.NO),10,"");
					return;
				} 
				UserId=Grd_resetdata.selectedItem.Id;
				Email=Grd_resetdata.selectedItem.EmailId;
				//Grd_resetdata.dataProvider=null;
				//useWeb("TravelDesk","Userdata_CUSTOM",[GlobalXml,"UserData","","",UserId,0]);
				//useWeb("TravelDesk","Update_CUSTOM",[GlobalXml,"Update","DeleteDesk","",UserId,0]); 
			}
			private function Savesuccess2(event:CloseEvent):void 
			{
				
				if (event.detail==Alert.YES) 
				{	  
					useWeb("TravelDesk","InActiveUser_CUSTOM",[GlobalXml,"Update",Email,"DeleteEnduser",UserId,0]); 
				}
			}
			public function FnAction(Event):void
			{  
				brd_Popup_reset.visible=true;
				UserId=Grd_resetdata.selectedItem.Id;
				//Grd_resetdata.dataProvider=null;
				useWeb("TravelDesk","Userdata_CUSTOM",[GlobalXml,"UserData","","",UserId,0]); 
			}
			public function FnClosetariff_clickHandler(event):void
			{
				Txt_Emails.text="", Txt_Firsts.text="",
					Txt_Lasts.text="", Txt_Mobiles.text="",Id=0;Mode="";
				brd_Popup_reset.visible=false;FiltFirstName.text="";
			} 
			protected function TravelDesks():void
			{
				btn_TravelAgency.Button_OutHandler();
				Btn_EndUser.Button_OutHandler();
				FnClear();
				brd_travelAgency.visible=false;
				brd_TravelDesk.visible=true;
				brd_EndUser.visible=false;
				btn_TravelDesk.visible=true;
				btn_TravelAgency.visible=true;
				Btn_EndUser.visible=true;
				Id_TrDesk.setButtonRights("Search",false); 
				Id_TrDesk.setButtonRights("Save",false); 
				Id_TrDesk.setButtonRights("Delete",true);
				Id_TrDesk.setButtonRights("Clear",false);
				Id_TrDesk.setButtonRights("Refresh",false);
				//btn_TravelAgency.visible = false;
				//Btn_EndUser.visible = false;
				type.visible=true;chk_Delete.visible=false;
			}
			public function TravelAgencys():void
			{
				travelAgentclear();Email="";
				btn_TravelDesk.Button_OutHandler();
				Btn_EndUser.Button_OutHandler();
				btn_Refresh_clickHandler();
				brd_travelAgency.visible=true;
				brd_TravelDesk.visible=false;
				brd_EndUser.visible=false;
				btn_TravelDesk.visible=true;
				btn_TravelAgency.visible=true;
				Btn_EndUser.visible=true; 
				Sctrols();
				Id_TrAgency.visible=true;Email="";
				type.visible=false;chk_Delete.visible=false;
			}
			public function EndUsers():void
			{
				//hlp_property.enabled=true;
				Hlp_Client_Desk.text="";FiltFirstName.text="";
				ClientId=0;
				btn_TravelDesk.Button_OutHandler();
				btn_TravelAgency.Button_OutHandler();
				brd_travelAgency.visible=false;
				brd_TravelDesk.visible=false;
				brd_EndUser.visible=true;
				btn_TravelDesk.visible=true;
				btn_TravelAgency.visible=true;
				Btn_EndUser.visible=true;
				Sctrols();
				Id_TrDesk.setButtonRights("Save",true);
				Id_TrDesk.setButtonRights("Search",true);
				Id_TrDesk.setButtonRights("Delete",true);
				Id_TrDesk.setButtonRights("Clear",true);
				Id_TrDesk.setButtonRights("Refresh",true);
				//Ddl_ClientResetPwd.enabled=false;
				Grd_resetdata.dataProvider=null;
				type.visible=false;chk_Delete.visible=false;Email="";
				//Hlp_Client.prompt=" Select Client ";
			}
			
			protected function Sctrl_Approve_clickHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				useWeb("TravelDesk","resetbutton_CUSTOM",[GlobalXml,"ResetPasswoed","","",UserId,0]); 
			}
			public function Sctrols():void
			{	Id_TrDesk.setButtonRights("Save",true);
				Id_TrDesk.setButtonRights("Search",true);
				Id_TrDesk.setButtonRights("Delete",true);
				Id_TrDesk.setButtonRights("Clear",true);
				Id_TrDesk.setButtonRights("Refresh",true);
			}
			public function btn_Refresh_clickHandler():void
			{
				useWeb("TravelDesk","CLIENTDTLS_Agency_CUSTOM",[GlobalXml,"CLIENTDTLS-Agency","","",0,0]); 
			}
			public function FnChkChange(event:Event):void
			{
				
				var Ac:ArrayCollection=new ArrayCollection();				
				Ac=Grd_ListClient.dataProvider as ArrayCollection;				
				var Index:int=Grd_ListClient.selectedIndex;				
				if(Ac[Index].Tick==0)
				{
					Ac[Index].Tick=1;
				}
				else
				{
					Ac[Index].Tick=0;
				}
			} 
			public var Client_AC:ArrayCollection=new ArrayCollection(); 
			private function ClientListAllSelect():void
			{
				Client_AC=new ArrayCollection();
				Client_AC=Grd_ListClient.dataProvider as ArrayCollection;
				for(var o:int=0;o<Client_AC.length;o++)
				{
					Client_AC[o].Tick=chk_ListClient.selected;				
				}
				Grd_ListClient.dataProvider=Client_AC;
			} 
			public var FltNm:String="";
			public var myArrayCollection:ArrayCollection=new ArrayCollection();
			private function filter(Filt:String):void
			{				
				FltNm=Filt;				
				var tempAC:ArrayCollection=new ArrayCollection();	
				//tempAC=myArrayCollection
				tempAC=Grd_resetdata.dataProvider as ArrayCollection;
				tempAC.filterFunction = filterMyArrayCollection;
				tempAC.refresh();				
			}	
			private function filterMyArrayCollection(item:Object):Boolean 
			{
				var Itm:Boolean=true;				
				if(FiltFirstName.text!="")
				{
					var searchString:String = FiltFirstName.text.toLowerCase();
					var itemName:String = (item.FirstName as String).toLowerCase();
					Itm=itemName.indexOf(searchString) > -1;
				}				
				return Itm;		
			}
			//public var FltNms:String="";
			public var myArrayCollections:ArrayCollection=new ArrayCollection();
			public function filtersd(Filt:String):void
			{				
				FltNm=Filt;				
				var tempACs:ArrayCollection=new ArrayCollection(); 
				tempACs=Grd_ListClient.dataProvider as ArrayCollection;
				tempACs.filterFunction = filterMyArrayCollections;
				tempACs.refresh();				
			}	
			private function filterMyArrayCollections(item:Object):Boolean 
			{
				var Itm:Boolean=true;				
				if(FiltClientName.text!="")
				{
					var searchString:String = FiltClientName.text.toLowerCase();
					var itemName:String = (item.ClientName as String).toLowerCase();
					Itm=itemName.indexOf(searchString) > -1;
				}				
				return Itm;		
			}
			
			private function CourierChange():void
			{
				// TODO Auto-generated method stub 
				chk_Delete.visible=false;
				FnClear1();				//Mode.selectedValue=1; 
				Hlp_Clients.Select_Row=null;
				Hlp_FirstName.fnClear();
				if(Modes.selectedValue==0)
				{
					MasterClients="MasterClient";
					useWeb("TravelDesk","CLIENTDTLS_CUSTOM",[GlobalXml,"MasterClent-Desk","",MasterClients,0,0]);
				} 
			 	if(Modes.selectedValue==1)
				{ 
					MasterClients="Client";
					useWeb("TravelDesk","CLIENTDTLS_CUSTOM",[GlobalXml,"CLIENTDTLS","",MasterClients,0,0]); 
				} 
			//	Hlp_Clients._setFocus();
			}
			 
			protected function chk_Delete_changeHandler(event:Event):void
			{
				// TODO Auto-generated method stub
				if(chk_Delete.selected==true)
				{
					if(Id!=0)
					{
						alignAlert(Alert.show("Do you want to Delete this User?", "Warning",Alert.YES | Alert.NO, null,
							Savesuccess1, iconWarning, Alert.NO),10,"");
						return;
					}
					else
					{
						chk_Delete.selected=false;
						alignAlert(Alert.show("Search User Details and Select.","Alert Message !",
							Alert.OK,null,null,iconWarning,Alert.OK),10,"");
						return;
					}
				} 
			}
			private function Savesuccess1(event:CloseEvent):void 
			{
				if (event.detail==Alert.YES) 
				{	  
					useWeb("TravelDesk","UserDel_CUSTOM",[GlobalXml,"Update","","TravelDesk",Id,0]); 
				}
				else
				{
					chk_Delete.selected=false;
				}
			}
			
		]]>
		
	</fx:Script>
	<fx:Declarations>
		
	</fx:Declarations>
	<s:BorderContainer x="26" y="19" width="100%" height="415" depth="50" backgroundColor="#fbf9f9" borderVisible="false">
		<WrbComp:TabButton_HB id="btn_TravelDesk" x="230" y="0" width="120" height="40"
							  _Label="Travel Desk" click="TravelDesks()"/>
		<WrbComp:TabButton_HB id="btn_TravelAgency" x="360" y="0" width="120" height="40"
							  _Label="Travel Agency" click="TravelAgencys()"/>
		<WrbComp:TabButton_HB id="Btn_EndUser" x="500" y="0" width="120" height="40" _Label="End User"
							  click="EndUsers()"/>
		
		<s:BorderContainer id="brd_TravelDesk" x="0" y="47" width="100%" height="100%" visible="true"
						   borderVisible="false" backgroundColor="#fbf9f9">
			<mx:Label x="120" y="147" text="First Name"/>
			<mx:Label x="120" y="205" text="Last Name"/>
			<mx:Label x="186" y="201" text="*" color="red"/>
			<mx:Label x="120" y="263" text="Mobile"/>
			<s:TextInput id="txt_Office" x="590" y="69" width="158" height="21" maxChars="12"   restrict="0-9"  visible="false"/>
			<mx:Label x="120" y="316" text="Email"/>
			<mx:Label x="500" y="147" text="City"/>
			<mx:Label x="500" y="95" text="State"/>
			<mx:Label x="500" y="42" text="Password"/>
			<WrbHelpComp:HelpText id="Hlp_State" x="601" y="95" width="158" height="21" depth="200"
								  pxTabIndex="8" onselection="{ChangeState1()}" pxSetColumnsWidth="160,0"/>
			<!--s:DropDownList id="Hlp_State" x="601" y="102" width="158" height="21"
							prompt="Select State" tabIndex="6" change="ChangeState1()"> 
			</s:DropDownList-->
			<mx:Label x="158" y="312" width="12" height="14" color="red" text="*"/>
			<mx:Label x="159" y="259" height="15" color="red" text="*" width="12"/>
			<mx:Label x="186" y="143" text="*" color="red"/>
			<mx:Label x="191" y="91" text="*" color="red"/>
			<!--s:DropDownList id="Hlp_City" x="601" y="159" width="158" height="21"
							prompt="Select City" tabIndex="7"  change="ChangeCity()"/-->
			<WrbHelpComp:HelpText id="Hlp_City" x="601" y="147" width="158" height="21" depth="90"
								  pxTabIndex="9" onselection="{ChangeCity()}" pxSetColumnsWidth="160,0"/>
			<WrbHelpComp:HelpText id="Hlp_FirstName" x="230" y="147" width="158" height="21"  depth="105"
								  pxTabIndex="4" onselection="{ChangeName()}" pxSetColumnsWidth="140,140,140,140,0,0,0"/>
			 
			<s:TextInput id="txt_LastName" x="230" y="205" width="158" height="21" maxChars="50" tabIndex="5" editable="false"/>
			<s:TextInput id="txt_Designation" x="210" y="209" width="158" height="21" maxChars="50"  visible="false"/>
			<s:TextInput id="txt_Mobile" x="230" y="262" width="158" height="21"  restrict="0-9" tabIndex="6" editable="false"
						 change="txt_Mobile_changeHandler(event)"  focusOut="txt_Mobile_focusOutHandler()" maxChars="10"  />
		
			<s:TextInput id="txt_Email" x="230" y="316" width="158" height="21"  change="txt_Email_changeHandler(event)"
						 focusOut="txt_Email_focusOutHandler(event)" tabIndex="7" maxChars="50" editable="false"/> 
			<mx:Label x="501" y="205" text="Website"/>
			<s:CheckBox x="511" y="263" label="Delete User" tabIndex="11" id="chk_Delete" selected="false" change="chk_Delete_changeHandler(event)"/>
			<s:TextInput id="txt_Website" x="601" y="205" width="158" height="21"  tabIndex="10"  />
			
			<s:TextArea x="250" y="232" width="158" height="62" id="txt_address" maxChars="200"  visible="false"/>
			<mx:Label x="120" y="95" text="Client Name"/>
			<mx:Label x="181" y="43" text="*" color="red"/>
			<mx:Label x="120" y="47" text="Client Type"/>
			<!--s:HGroup x="229" y="48" width="158" horizontalAlign="center" verticalAlign="middle" gap="17"  id="type">
				<s:RadioButton label="MasterClient" groupName="Mode" value="0"
							   id="MasterClient" buttonMode="true" change="MasterClient_changeHandler(event)"/>
				<s:RadioButton label="Client" groupName="Mode"  value="1"
							   id="Client" buttonMode="true" />
			</s:HGroup-->
			<s:HGroup x="229" y="48" width="158" horizontalAlign="center" verticalAlign="middle" gap="17"  id="type">
				<s:RadioButton label="MasterClient" groupName="Modes" value="0"
							   id="MasterClient" buttonMode="true" tabIndex="1"/>
				<s:RadioButton label="Client" groupName="Modes"  value="1"
							   id="Client" buttonMode="true" tabIndex="2"/>
			</s:HGroup>
			<WrbHelpComp:HelpText id="Hlp_Clients" x="229" y="95" width="158" height="21" depth="150"
								  pxTabIndex="3" onselection="{Ddl_Client_changeHandler()}" pxSetColumnsWidth="227,0"> 
				</WrbHelpComp:HelpText>  
			<mx:Label x="601" y="43" width="171" text="System Generated Password "/>
		</s:BorderContainer>
		<s:BorderContainer id="brd_travelAgency" visible="false" x="0" y="47" width="100%" height="100%" 
						   backgroundColor="#fbf9f9" borderVisible="false">
			
			<mx:Label x="120" y="55" text="First Name"/>
			<mx:Label x="186" y="52" text="*" color="red"/>
			<mx:Label x="158" y="143" text="*" color="red"/>
			<mx:Label x="156" y="187" text="*" color="red"/>
			<mx:Label x="120" y="103" text="Last Name"/>
			<mx:Label x="120" y="147" text="Mobile"/>
			<mx:Label x="120" y="195" text="Email"/>
			
			<s:TextInput id="txt_FirstName_Agen" x="230" y="55" width="158" height="21" maxChars="100" tabIndex="2"/>
			<s:TextInput id="txt_LastName_Agen" x="230" y="99" width="158" height="21" maxChars="50" tabIndex="3"/>
			<s:TextInput id="txt_Mobile_Agen" x="230" y="145" width="158" height="21"  restrict="0-9" tabIndex="4"
						 change="txt_Mobile_changeHandler(event)"  focusOut="txt_Mobile_focusOutHandler()" maxChars="10"  />
			
			<s:TextInput id="txt_Email_Agen" x="230" y="195" width="158" height="21"  change="txt_Email_changeHandler(event)"
						 focusOut="txt_Email_focusOutHandler(event)" tabIndex="5" maxChars="50"/>
			
			<mx:Label x="120" y="245" text="Password"/> 
			<mx:Label x="230" y="243" width="171" text="System Generated Password "/>
			<mx:Label x="120" y="291" text="Website"/>
			<s:TextInput id="txt_Website_Agen" x="230" y="289" width="158" height="21"  tabIndex="8"  />
			
			<s:CheckBox x="522" y="18" label="List of Client" visible="false"
						tabIndex="98" id="chk_ListClient" change="ClientListAllSelect()"/>
			<mx:Label x="522" y="18" text="Filter by Name"/>
			<s:TextInput x="617" y="18" width="238" height="22" prompt="Client Name" id="FiltClientName"
						 change="filtersd('ClientName')"/>
			
			<mx:DataGrid id="Grd_ListClient" depth="100" x="512" y="45" width="343" height="313" tabIndex="10"
						 dragEnabled="true" draggableColumns="false" dragMoveEnabled="true"
						 dropEnabled="true" editable="true" focusEnabled="false" doubleClickEnabled="true" 					 
						 textAlign="center" borderVisible="true" >
				<mx:columns>				
					<mx:DataGridColumn dataField="Tick" headerText="Select" width="50"  editable="false">
						<mx:itemRenderer>
							<fx:Component>
								<mx:HBox horizontalAlign="center" verticalAlign="middle">
									<mx:CheckBox selected="{data.Tick}" enabled="true" 
												 change="outerDocument.FnChkChange(event);"/>
								</mx:HBox>
							</fx:Component>
						</mx:itemRenderer>
					</mx:DataGridColumn>										
					<mx:DataGridColumn dataField="ClientName" width="180"  id="Col_Client"
									   headerText="Client Name" editable="False" textAlign="left"/>
					<mx:DataGridColumn dataField="ClientId" width="0" visible="false"/>
					<!--mx:DataGridColumn dataField="Id" width="0" visible="false"/-->				
				</mx:columns>
			</mx:DataGrid> 
			<s:HGroup x="13" y="392" width="849" height="35" horizontalAlign="center" verticalAlign="middle"
					  depth="0">
			<WrbComp:SaveControl id="Id_TrAgency" visible="false" x="200" y="391" 
								 docClear=" travelAgentclear()" docDelete="Delete()" docRefresh="PageLoad()"
								 docSave="Tr_Agent_Save()" doSearch="Tr_Agent_Search()">
			</WrbComp:SaveControl> 
				</s:HGroup>
		</s:BorderContainer>
		<s:BorderContainer x="0" y="47" width="100%" height="100%"  id="brd_EndUser" visible="false" 
						   borderVisible="false" backgroundColor="#fbf9f9">
			<!--s:DropDownList id="Ddl_ClientResetPwd" x="35" y="40" width="229" height="25"
			prompt="Select Client" tabIndex="1" change="Ddl_Client_Reset(event)"> 
			</s:DropDownList-->
			<mx:Label x="36" y="44" text="Select Client Name"/>
			<mx:Label x="485" y="17" text="&lt;---Filter by First Name"/>
			<WrbHelpComp:HelpText id="Hlp_Client_Desk" x="36" y="70" width="228" height="28" depth="100"
								  onselection="{hlp_Clients()}" pxSetColumnsWidth="227,0"> 
			</WrbHelpComp:HelpText>
			<s:TextInput x="323" y="18" width="148" height="22" prompt="First Name" id="FiltFirstName" change="filter('FirstName')"/>
			<mx:DataGrid x="272" y="40" width="605" height="318" id="Grd_resetdata"> 
				<mx:columns>
					<mx:DataGridColumn dataField="Select" headerText="Select" width="50" 
									   editable="false" visible="true">
						<mx:itemRenderer >
							<fx:Component>
								<mx:HBox horizontalAlign="center" verticalAlign="middle">										
									<mx:Image source="@Embed(source='../Assets/application_put.png')" buttonMode="true"
											  click="outerDocument.FnAction(event)"/>
								</mx:HBox>	
							</fx:Component>
						</mx:itemRenderer>
					</mx:DataGridColumn>
					<mx:DataGridColumn dataField="Delete" headerText="Delete" width="50" 
									   editable="false" visible="true">
						<mx:itemRenderer >
							<fx:Component>
								<mx:HBox horizontalAlign="center" verticalAlign="middle">										
									<mx:Image source="@Embed(source='../assets/delete.png')" buttonMode="true"
											  click="outerDocument.Deletes(event)"/>
								</mx:HBox>	
							</fx:Component>
						</mx:itemRenderer>
					</mx:DataGridColumn> 
					 
					<mx:DataGridColumn headerText="FirstName" dataField="FirstName" width="150"/>
					<mx:DataGridColumn headerText="EmpCode" dataField="EmpCode" width="100"/>
					<mx:DataGridColumn headerText="Last Name" dataField="LastName" width="80"/> 
					<mx:DataGridColumn headerText="EmailId" dataField="EmailId" width="130"/>
					<mx:DataGridColumn headerText="Status" dataField="Active" width="100"/>
					<mx:DataGridColumn headerText="Id" dataField="Id" width="0" visible="false"/>
					<mx:DataGridColumn headerText="CltmgntId" dataField="CltmgntId" width="0" visible="false"/>
				</mx:columns>
			</mx:DataGrid>   
		</s:BorderContainer>
		
	</s:BorderContainer>
	<s:BorderContainer x="62" y="19" width="834" height="474" id="brd_Popup_reset"
					   borderVisible="true" visible="false" depth="1500">
		<mx:Label x="213" y="75" text="First Name"/>
		<mx:Label x="213" y="121" text="Last Name"/>
		<mx:Label x="213" y="288" text="Email Id"/>
		<mx:Label x="213" y="234" text="Mobile"/>
		<mx:Label x="213" y="340" text="Password"/>
		<mx:Label x="341" y="343" width="204" 
				  text="System Generated Password "/>
		<s:TextInput x="346" y="70" width="199" height="29"  id="Txt_Firsts" editable="false"/>
		<s:TextInput x="346" y="285" width="199" height="29" id="Txt_Emails" editable="false" />
		<s:TextInput x="346" y="117" width="199" height="29" id="Txt_Lasts" editable="true"/>
		<mx:Label x="213" y="176" text="EmpCode"/>
		<s:TextInput x="346" y="172" width="199" height="29" id="Txt_Empcode" editable="true"/>
		<s:TextInput x="346" y="230" width="199" height="29" id="Txt_Mobiles" editable="true" restrict="0-9" maxChars="10"/>
		<s:BorderContainer x="0" y="0" width="832" height="36" borderVisible="true"  backgroundColor="#c2c2c2">
			<s:Image x="802" y="10" source="@Embed(source='../Assets/CrossSmall.png')" 
					 buttonMode="true" toolTip="Close" click="FnClosetariff_clickHandler(event)"/>
			<mx:Label x="29" y="8" text="Reset Password" color="red"/>  
		</s:BorderContainer>
		<!--s:CheckBox x="310" y="380" label="Delete User" id="chk_Delete_Desk" selected="false" change="chk_Delete_changeHandler(event)"/--> 
		<mx:Button x="370" y="420" label="Reset Password" click="EndUser_Save()"/> 
	</s:BorderContainer>
	<s:HGroup x="40" y="458" width="847" height="35" horizontalAlign="center" verticalAlign="middle"
			  depth="0">
		<WrbComp:SaveControl docClear="FnClear()" x="200" y="391" docRefresh="PageLoad()" docSave="Save()" doSearch="Search()"
							 docDelete="Delete()" id="Id_TrDesk">
		</WrbComp:SaveControl>
	</s:HGroup>
	<mx:HRule x="0" y="442" width="100%" strokeColor="#eb1c24"/>
</s:Application>
